((function(){var a,b,c,d,e,f,g=Object.prototype.hasOwnProperty,h=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};a={},e=function(a){return a.replace(/s$/,"")},b=function(a){function b(a){this.name="Roundate.UnitError",this.message="Unknown unit "+a,this.stack=(new Error).stack}return h(b,a),b}(Error),a.UnitError=b,a.add=function(a,c,d){a=new Date(a);switch(e(d)){case"millisecond":a.setUTCMilliseconds(a.getUTCMilliseconds()+c);break;case"second":a.setUTCSeconds(a.getUTCSeconds()+c);break;case"minute":a.setUTCMinutes(a.getUTCMinutes()+c);break;case"hour":a.setUTCHours(a.getUTCHours()+c);break;case"day":a.setUTCDate(a.getUTCDate()+c);break;case"week":a.setUTCDate(a.getUTCDate()+c*7);break;case"month":a.setUTCMonth(a.getUTCMonth()+c);break;case"year":a.setUTCFullYear(a.getUTCFullYear()+c);break;default:throw new b(d)}return a},a.subtract=function(b,c,d){return a.add(b,c*-1,d)},a.floor=function(a,c){var d,f;a=new Date(a),f=e(c);if(f!=="millisecond"){a.setUTCMilliseconds(0);if(f!=="second"){a.setUTCSeconds(0);if(f!=="minute"){a.setUTCMinutes(0);if(f!=="hour"){a.setUTCHours(0);if(f==="week")d=(a.getUTCDay()+6)%7,a.setUTCDate(a.getUTCDate()-d);else if(f!=="day"){a.setUTCDate(1);if(f==="year")a.setUTCMonth(0);else if(f!=="month")throw new b(c)}}}}}return a},a.ceiling=function(b,c){var d;return b=new Date(b),d=a.floor(b,c),b.getTime()===d.getTime()?b:a.add(d,1,c)},a.round=function(b,c){var d,e,f,g;return b=new Date(b),d=a.ceiling(b,c),f=a.floor(b,c),e=d.getTime()-b.getTime(),g=b.getTime()-f.getTime(),e>g?f:d},f=function(a){return function(){return a.apply(this,arguments).getTime()}};for(d in a)c=a[d],a[""+d+"Time"]=f(c);typeof module!="undefined"&&module!==null&&module.exports?module.exports=a:this.Roundate=a})).call(this);